{
    "ID": "RenderChannelDenoiser",
    "Name" : "Denoiser",
    "Subtype" : "SPECIAL",
    "Parameters": [
        {
            "attr": "enabled",
            "default": true
        },
        {
            "attr": "use_gpu",
            "default": true
        },
        {
            "attr" : "name",
            "default" : "Denoiser"
        },
        {
            "attr": "engine",
            "update": "onUpdateEngine"
        },
        {
            "attr": "viewport_enabled",
            "type": "BOOL",
            "default": false,
            "desc" : "True to enable the viewport denoising",
            "update": "onUpdateViewportEngine",
            "options": {
                "derived": true
            }
        },
        {
            "attr": "viewport_engine",
            "type": "ENUM",
            "desc" : "The denoising engine to use. The default V-Ray denoiser (0) is slower but may produce better results and has a version that runs on CPUs. The NVIDIA AI denoiser (1) is very fast but may be less accurate and requires a compatible NVIDIA GPU. The Intel Open Image Denoise (2) is fast and runs on CPUs (it utilizes advanced instructions sets like AVX2, AVX512). Note that the three denoising engines use slightly different render elements",
            "items":
            [
                [ "0", "V-Ray", "Default V-Ray denoiser" ],
                [ "2", "Intel", "Intel Open Image Denoise" ],
                [ "1", "NVIDIA", "NVIDIA AI denoiser" ],
                [ "3", "NVIDIA(upscaling)", "NVIDIA AI upscaling denoiser" ]
            ],
            "update": "onUpdateViewportEngine",
            "default": "2",
            "options": {
                "derived": true
            }
        }
    ],
    "Widget": {
        "widgets": [
            {
                "attrs": [
                    {
                        "name": "channelType",
                        "custom_draw": "widgetDrawChannelType"
                    },
                    {
                        "name": "enabled"
                    },
                    {
                        "layout": "COLUMN",
                        "active": { "cond": "::enabled=1" },
                        "attrs": [
                            {
                                "name": "engine"
                            },
                            {
                                "name": "preset",
                                "visible": {
                                    "cond": "::engine=0"
                                }
                            },
                            {
                                "name": "strength",
                                "active": {
                                    "cond": "::preset=3"
                                },
                                "visible": {
                                    "cond": "::engine=0"
                                }
                            },
                            {
                                "name": "radius",
                                "active": {
                                    "cond": "::preset=3"
                                },
                                "visible": {
                                    "cond": "::engine=0"
                                }
                            }
                        ]
                    }
                ],
                "layout": "COLUMN"
            },
            {
                "layout": "ROLLOUT",
                "name": "advanced",
                "label": "Advanced",
                "default_closed": false,
                "active": { "cond": "::enabled=1" },
                "attrs": [
                    {
                        "name": "use_gpu",
                        "visible": {
                            "cond": "::engine=0"
                        }
                    },
                    {
                        "name": "wrap_around_borders",
                        "visible": {
                            "cond": "::engine=0"
                        }
                    },
                    {
                        "name": "temporal_mode",
                        "label": "Use NVIDIA Temporal Mode",
                        "active": {
                            "cond": "::optix_use_upscale=0"
                        },
                        "visible": {
                            "cond": "::engine=1"
                        }
                    },
                    {
                        "name": "optix_use_upscale",
                        "visible": {
                            "cond": "::engine=1"
                        }
                    },
                    {
                        "name": "oidn_prefilter",
                        "visible": {
                            "cond": "::engine=2"
                        }
                    },
                    {
                        "name": "mode"
                    },
                    {
                        "name": "denoise_alpha"
                    }
                ]
            }
        ]
    },
    "Node": {
        "widgets": [
            {
                "layout": "COLUMN",
                "attrs": [
                    {
                        "name": "engine"
                    }
                ]
            }
        ],
        "input_sockets": [ ]
    },
    "Options": {
        "animatable": false,
        "excluded_parameters": [
            "enableDeepOutput",
            "type",
            "progressive_update",
            "generate_render_elements",
            "silence_optix_init_error"
        ]
    }
}