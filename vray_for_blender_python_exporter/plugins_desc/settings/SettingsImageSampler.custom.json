{
    "ID": "SettingsImageSampler",
    "Parameters": [
        {
            "attr": "filter_type",
            "default": "FilterLanczos",
            "desc": "Antialiasing filter type",
            "items": [
                [
                    "NONE",
                    "None",
                    ""
                ],
                [
                    "FilterArea",
                    "Area",
                    ""
                ],
                [
                    "FilterBox",
                    "Box",
                    ""
                ],
                [
                    "FilterCatmullRom",
                    "Catmull-Rom",
                    ""
                ],
                [
                    "FilterCookVariable",
                    "Cook Variable",
                    ""
                ],
                [
                    "FilterGaussian",
                    "Gaussian",
                    ""
                ],
                [
                    "FilterLanczos",
                    "Lanczos",
                    ""
                ],
                [
                    "FilterMitNet",
                    "Mitchell-Netravali",
                    ""
                ],
                [
                    "FilterSinc",
                    "Sinc",
                    ""
                ],
                [
                    "FilterTriangle",
                    "Triangle",
                    ""
                ]
            ],
            "type": "ENUM",
            "options": {
                "derived": true
            }
        },
        {
            "attr": "object_selector",
            "type": "TEMPLATE",
            "desc": "List of objects to use as render mask",
            "options": {
                "template": {
                    "type": "templateIncludeExclude",
                    "custom_exporter": true,
                    "args": {
                        "collection": "objects",
                        "bound_property": "render_mask_objects",
                        "filter_function": "filters.filterRenderMasks"
                    }
                }
            }
        },
        {
            "attr": "render_mask_object_ids_list",
            "desc": "Object IDs to use for render mask, separated by a semicolon.",
            "type": "STRING",
            "options": {
                "derived": true
            },
            "ui": {
                "display_name": "Object IDs"
            }
        },
        {
            "attr": "render_mask_texture_file",
            "type": "STRING",
            "desc": "Texture to use as a render mask.",
            "default": "",
            "subtype": "FILE_PATH",
            "options": {
                "derived": true
            },
            "ui": {
                "display_name": "Texture"
            }
        },
        {
            "attr" : "render_mask_mode",
            "default" : "0",
            "desc" : "Sets the mode for the render mask. The mode controls which render_mask_* parameter will be used to generate the mask from (0 - Disable, 1 - Texture, 2 - Objects, 3 - ObjectIDs)",
            "items" :
            [
                [ "0", "Disabled", "The render mask is not used" ],
                [ "1", "Texture", "A texture map is used for the render mask. Black values in the map define pixels which are not rendered. Pixels with any other values are rendered" ],
                [ "2", "Objects", "Renders only objects specified in a list" ],
                [ "3", "ObjectIDs", "Renders only objects with specified Object IDs" ],
                [ "4", "Active Selection", "Renders only the selected object or objects" ]
            ],
            "type" : "ENUM",
            "ui" : {
                "display_name": "Mode"
            }
        },
        {
            "attr": "type",
            "default": "3",
            "desc": "The type of the image sampler (Bucket or Progressive)",
            "items": [
                [
                    "1",
                    "Bucket",
                    "Bucket"
                ],
                [
                    "3",
                    "Progressive",
                    "Progressive"
                ]
            ],
            "type": "ENUM",
            "ui": {
                "display_name": "Sampler Type"
            }
        },
        {
            "attr": "render_mask_clear",
            "default": true,
            "type": "BOOL"
        },
        {
            "attr": "lock_subdivs",
            "desc": "Using fixed subdivs",
            "default": false,
            "type": "BOOL",
            "ui": {
                "display_name": "Lock Subdivs"
            },
            "options": {
                "derived": true
            }
        },
        {
            "attr": "dmc_fireflyRemoval",
            "default": 0.05,
            "ui": {
                "max": 1,
                "min": 0,
                "gpuSupport": "none", 
                "display_name": "Firefly Removal Threshold"
            }
        },
        {
            "attr": "progressive_maxSubdivs",
            "default": 100
        },
        {
            "attr": "dmc_maxSubdivs",
            "default": 24
        },
        {
            "attr": "dmc_adaptivity_clamp",
            "default": 1.5
        },
        {
            "attr": "min_shade_rate",
            "default": 6
        },
        {
            "attr": "gpu_ray_bundle",
            "type": "BOOL",
            "desc": "Dummy attribute",
            "default": false,
            "options": {
                "derived": true
            }
        },
        {
            "attr": "progressive_maxTime",
            "ui": {
                "display_name": "Max Render Time (mins)"
            }
        },
        {
            "attr": "dmc_threshold",
            "ui" : {
                "display_name": "Noise Limit"
            }
        },
        {
            "attr": "animated_noise_pattern",
            "type": "BOOL",
            "desc": "If this is true, the sample pattern will vary from frame to frame",
            "default": true,
            "options" : {
                "derived": true
            }
        },
        {
            "attr": "samples_limit",
            "type": "INT",
            "desc": "Determines the maximum number of samples that each pixel in the image receives",
            "default": 2500,
            "ui": {
                "min": 0,
                "spft_min": 1500,
                "soft_max": 10000
            },
            "options": {
               "derived": true
            },
            "update": "onUpdateSamplesLimit"
        }
    ],
    "Widget": {
        "widgets": [
            {
                "layout": "COLUMN",
                "attrs": [
                    {
                        "name": "type"
                    },
                    {
                        "layout": "SEPARATOR"
                    },
                    {
                        "layout":  "COLUMN",
                        "name": "Progressive CPU",
                        "visible": {"cond": "plugins.settings.SettingsImageSampler.isCpuProgressive"},
                        "attrs": [
                            {
                                "name": "progressive_minSubdivs"
                            },
                            {
                                "name": "progressive_maxSubdivs"
                            },
                            {
                                "name": "progressive_threshold"
                            },
                            {
                                "name": "progressive_maxTime"
                            },
                            {
                                "name": "progressive_bundleSize"
                            },
                            {
                                "name": "dmc_adaptivity_clamp"
                            }
                        ]
                    },
                    {
                        "layout":  "COLUMN",
                        "name": "Adaptive CPU",
                        "visible": {"cond": "plugins.settings.SettingsImageSampler.isCpuAdaptive"},
                        "attrs": [
                            {
                                "name": "lock_subdivs"
                            },
                            {
                                "name": "dmc_minSubdivs",
                                "visible": {"cond": "::lock_subdivs=0"}
                            },
                            {
                                "name": "dmc_minSubdivs",
                                "label": "Subdivs",
                                "visible": {"cond": "::lock_subdivs=1"}
                            },
                            {
                                "name": "dmc_maxSubdivs",
                                "visible": {"cond": "::lock_subdivs=0"}
                            },
                            {
                                "name": "dmc_threshold"
                            },
                            {
                                "name": "dmc_adaptivity_clamp"
                            },
                            {
                                "name": "dmc_fireflyRemoval"
                            }
                        ]
                    },
                    {
                        "layout":  "COLUMN",
                        "name": "Progressive GPU",
                        "visible": {"cond": "plugins.settings.SettingsImageSampler.isGpuProgressive"},
                        "attrs": [
                            {
                                "name": "samples_limit"
                            },
                            {
                                "name": "progressive_threshold"
                            },
                            {
                                "name": "progressive_maxTime"
                            },
                            {
                                "name": "gpu_ray_bundle",
                                "custom_draw": "widgetDrawExternalProperties"
                            },
                            {
                                "name": "dmc_adaptivity_clamp"
                            }
                        ]
                    },
                    {
                        "layout":  "COLUMN",
                        "name": "Adaptive GPU",
                        "visible": {"cond": "plugins.settings.SettingsImageSampler.isGpuAdaptive"},
                        "attrs": [
                            {
                                "name": "samples_limit"
                            },
                            {
                                "name": "dmc_threshold"
                            },
                            {
                                "name": "gpu_ray_bundle",
                                "custom_draw": "widgetDrawExternalProperties"
                            },
                            {
                                "name": "dmc_adaptivity_clamp"
                            },
                            {
                                "name": "dmc_fireflyRemoval"
                            }
                        ]
                    },
                    {
                        "name": "animated_noise_pattern",
                        "custom_draw" : "widgetDrawExternalProperties"
                    }
                ]
            }
            
        ],
        "render_mask": [
            {
                "layout": "COLUMN",
                "attrs": [
                   {
                        "name": "render_mask_mode"
                    },
                    {
                        "name": "render_mask_texture_file",
                        "visible": {"cond": "::render_mask_mode=1"}
                    },
                    {
                        "name": "object_selector",
                        "visible": {"cond": "::render_mask_mode=2"},
                        "list_label": "Mask objects"
                    },
                    {
                        "name": "render_mask_object_ids_list",
                        "visible": {"cond": "::render_mask_mode=3"}
                    },
                    {
                        "name": "render_mask_clear",
                        "label": "Clear Render Mask"
                    }
                ]
            }
        ]
    },
    "Options": {
        "excluded_parameters": [
            "progressive_showMask"
        ],
        "animatable": false
    }
}